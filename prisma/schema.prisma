// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  // output = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id           String        @id @default(uuid())
  email        String        @unique
  name         String?
  createdAt    DateTime      @default(now())

  collection   CollectionItem[]
  wishlist     WishlistItem[]
  decklists    Decklist[]
}

model CollectionItem {
  id           String     @id @default(uuid())
  scryfallId   String     // ID unique de la carte
  quantity     Int        @default(1)
  dateAdded    DateTime   @default(now())

  user         User       @relation(fields: [userId], references: [id])
  userId       String

  // Prix, ou autre info de suivi locale
  priceHistory Json
}

model WishlistItem {
  id           String     @id @default(uuid())
  scryfallId   String
  dateAdded    DateTime   @default(now())

  user         User       @relation(fields: [userId], references: [id])
  userId       String
}

model Decklist {
  id        String     @id @default(uuid())
  name      String
  createdAt DateTime   @default(now())

  user      User       @relation(fields: [userId], references: [id])
  userId    String

  cards     DeckCard[] // relation vers cartes du deck
}

model DeckCard {
  id           String     @id @default(uuid())
  scryfallId   String
  quantity     Int        @default(1)

  deck         Decklist   @relation(fields: [deckId], references: [id])
  deckId       String
}